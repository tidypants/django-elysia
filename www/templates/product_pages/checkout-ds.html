{% extends "product_pages/base-product.html" %}
{% load static %}
{% block title %}Checkout{% endblock %}
{% block content %}
    <div class="grid-x">
        <div class="cell large-9">
            <div class="sales-content">
                <span style="color: #e0a850; text-align: center">PRIORITY AGREEMENT FOR</span>
                <h1 class="checkout-title">Great 12-Month Angelic Tarot Reading</h1>
                <span style="display: block; text-align: center">Strictly reserved especially for: {{ account.first_name }}</span>
                <span>For 12 months of Happiness, Joy, Love, Money, and Success</span>
                <span>Thank you ELYSIA for your intervention among the Angels in my life!</span>
                <span>Because you were right: the celestial help of the angels is the only thing that can get me out of the tough situation I am going through. So let me tell you:</span>
                <span>&nbsp;</span>
                <ul class="checkbox-list">
                    <li><strong>YES ELYSIA</strong>, as soon as you receive this priority agreement, please perform my <strong>GREAT 12-MONTH ANGELIC TAROT READING</strong> using your angelic Tarot deck. I understand that you will draw 12 cards on my behalf, inspired by the Angels. These 12 cards will unveil my future destiny defined by the angels to compensate all the trials I had to endure in my life.</li>
                </ul>
                <ul class="checkbox-list">
                    <li><strong>ELYSIA</strong>, I need help from the Angels to make my projects and secret wishes come true in every aspect of my life (money, love, luck, success).</li>
                </ul>
                <ul class="checkbox-list">
                    <li><strong>ELYSIA</strong>, I know that Angels always speak the truth, so I am really eager to receive their revelations. I am delighted to confirm my agreement once again for you to perform my <strong>GREAT 12-MONTH ANGELIC TAROT READING</strong>.</li>
                </ul>
                <ul class="checkbox-list">
                    <li><strong>ELYSIA</strong>, I understand that my <strong>GREAT 12-MONTH ANGELIC TAROT READING</strong> reading is sent using email and will be delivered once prepared by Elysia (Usally within 24hours).</li>
                </ul>
                <ul class="checkbox-list">
                    <li><strong>ELYSIA</strong>, for everything you will perform on my behalf, I willingly send you a donation of the amount of ${{ price }} instead of $129 for the costs incurred to provide the reading that I made for you</li>
                </ul>
                <span>Simple and crystal clear! As usual for my services, this Help entitles you to my 100% Satisfaction Guarantee.</span>
                <span class="sales-signature">Elysia</span>
                <h2 style="margin: 30px auto 20px;">Your Order</h2>
                <div class="yourOrderBreakdown">
                    <div class="orderBreakdownPart">
                        <img src="/wp-content/uploads/2018/09/fastship.png">
                        <div class="orderBreakdownTitles"><span>Expedited Shipping</span><p>Superfast shipping from USA</p></div>
                        <span style="float: right; color: #41ad49; font-size: 14px; font-weight: bold; line-height: 60px;">APPLIED</span>
                    </div>
                    <div class="orderBreakdownPart" style="border-bottom: 0;">
                        <img src="/wp-content/uploads/2018/09/usbwa.jpeg">
                        <div class="orderBreakdownTitles"><span>Free Gift</span><p>USB Wall Adapter</p></div>
                        <div style="float: right; line-height: 30px;"><span style="display: block; font-size: 14px; text-align: center;">Worth $9</span><span style="float: right; color: #41ad49; font-size: 14px; font-weight: bold;">INCLUDED FREE</span></div>
                    </div>
                </div>
                <h2 style="margin: 40px auto 20px;">Step 1. Choose Discount</h2>
                <table>
                    <thead>
                    <tr>
                        <th class="table-item" style="background: white;"></th>
                        <th class="table-item" style="background: white;"></th>
                        <th class="table-pricing" style="padding: 10px 22px;border-top-right-radius: 5px;border-top-left-radius: 5px;border-top: 2px solid lightgrey!important;">Price</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr class="salesOption sOActive sOBestSeller" data-choice="1">
                        <td class="table-tick" style="border-right: none!important;border-top-left-radius: 5px;border-bottom-left-radius: 5px;"><div class="salesTableTick"></div></td>
                        <td class="table-item" style="padding: 20px 0;border-left: none!important;border-right: none!important;">BEST SELLER<br>Buy 3, Get 2 FREE<br>($177 total)</td>
                        <td class="table-pricing" style="border-left: none!important; border-top-right-radius: 5px; border-bottom-right-radius: 5px;">$35 / each</td>
                    </tr>
                    <tr class="salesOption" data-choice="2">
                        <td class="table-tick"><div class="salesTableTick"></div></td>
                        <td class="table-item">Buy 2, Get 1 FREE<br>($118 total)</td>
                        <td class="table-pricing">$39 / each</td>
                    </tr>
                    <tr class="salesOption" data-choice="3">
                        <td class="table-tick"><div class="salesTableTick"></div></td>
                        <td class="table-item">1 BugZapperPro<br>($59 / each)</td>
                        <td class="table-pricing">$59</td>
                    </tr>
                    <tr class="salesOption" data-choice="4">
                        <td class="table-tick"><div class="salesTableTick"></div></td>
                        <td class="table-item">2 BugZapperPro<br>($55 / each)</td>
                        <td class="table-pricing">$109</td>
                    </tr>
                    <tr class="salesOption" data-choice="5">
                        <td class="table-tick"><div class="salesTableTick"></div></td>
                        <td class="table-item">4 BugZapperPro<br>($49 / each)</td>
                        <td class="table-pricing" style="border-bottom: 2px solid lightgrey!important; border-bottom-left-radius: 5px; border-bottom-right-radius: 5px;">$199</td>
                    </tr>
                    </tbody>
                </table>
                <h2 id="payWithh2">Step 2. Pay With</h2>
                <div class="payWith">
                    <a id="payPalButton"><div class="payPalFButton"><img src="/wp-content/uploads/2018/09/paypalbuttttton.png"></div></a>
                    <span style="margin-top: 20px; display: block; font-size: 16px; text-align: center; font-weight: bold;">You can <span style="border-bottom: 1px solid black">still pay by card</span> with PayPal, even if you don't have an account!</span>
                    <img style="display: block; width: 100%; float: none; margin: 20px auto;" src="https://gettriplebristle.io/wp-content/uploads/desktop-trust-badges-4.png">
                </div>
                <script>
                    var elements = stripe.elements();

                    var style = {
                        base: {
                            iconColor: '#666EE8',
                            fontSize: '17px',
                            fontFamily: 'Helvetica Neue',
                            color: '#43454b',
                        },
                    };

                    var cardNumberElement = elements.create('cardNumber', {
                        style: style,
                        placeholder: "Card Number"
                    });
                    cardNumberElement.mount('#card-number-element');

                    var cardExpiryElement = elements.create('cardExpiry', {
                        style: style,
                        placeholder: "Expiry Date"
                    });
                    cardExpiryElement.mount('#card-expiry-element');

                    var cardCvcElement = elements.create('cardCvc', {
                        style: style
                    });
                    cardCvcElement.mount('#card-cvc-element');

                    var form = $("#payment-form");

                    $.validator.methods.email = function( value, element ) {
                        return this.optional( element ) || /[a-zA-Z0-9_.-]+@[a-zA-Z0-9_.-]+\.[a-zA-Z0-9_.-]+/.test( value );
                    }

                    $.validator.addMethod("fullname", function(value,element){
                        return this.optional( element ) || /[a-zA-Z]+ [a-zA-Z]/.test( value );
                    }, "Please enter full name" );

                    form.validate({
                        rules: {
                            name: {
                                required: true,
                                fullname: true
                            },
                            email_address: {
                                required: true,
                                email: true
                            },
                            address_country: {
                                required: true
                            },
                            address_line1: {
                                required: true
                            },
                            address_city: {
                                required: true
                            },
                            address_state: {
                                required: true
                            },
                            address_zip: {
                                required: true
                            }
                        }
                    });

                    form.submit(function(event) {
                        event.preventDefault();
                        if (form.valid()) {
                            $('#payment-form button').prop('disabled', true);
                            stripe.createToken(cardNumberElement).then(function(result) {
                                if (result.error) {
                                    var errorElement = document.getElementById('card-errors');
                                    errorElement.textContent = result.error.message;
                                    $('#payment-form button').prop('disabled', false);
                                } else {
                                    stripeTokenHandler(result.token);
                                }
                            });
                        }
                    });

                    function stripeTokenHandler(token) {
                        var names = $("#name").val().split(" ");
                        $("#first-name").val(names[0]);
                        $("#last-name").val(names[1]);
                        var form = document.getElementById('payment-form');
                        var hiddenInput = document.createElement('input');
                        hiddenInput.setAttribute('type', 'hidden');
                        hiddenInput.setAttribute('name', 'stripeToken');
                        hiddenInput.setAttribute('value', token.id);
                        form.appendChild(hiddenInput);
                        form.submit();
                    }

                    $(".otp-button").click(function() {
                        $("#method").val("total");
                        $(".payment-button-active").removeClass("payment-button-active");
                        $(this).addClass("payment-button-active");
                        $("#checkoutForm").show();
                    });

                    $(".ip-button").click(function() {
                        window.location.href = "/product/installments?cid={{ cid }}&uid={{ account.id }}&ds={{ ds }}";
                    });
                </script>
            </div>
        </div>
        <div class="cell large-3">
            <div class="sales-content">
                <h5>100% Secure</h5>
                <span>You benefit from my satisfaction guarantee. Should the Help received not bring you total satisfaction, you could ask for it to be refunded; this is my commitment to you, which is clearly indicated in my legal terms.</span>
                <span>Any questions can be answered at support@elysia-medium.com</span>
            </div>
        </div>
    </div>
{% endblock %}